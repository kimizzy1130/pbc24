import {
  button_default,
  menu_default,
  modal_default,
  typography_default
} from "./chunk-NZEJPVGI.js";
import "./chunk-GYWC62UC.js";
import {
  WalletReadyState,
  isRedirectable,
  useWallet
} from "./chunk-HQQMQZ6B.js";
import "./chunk-R7WADFW2.js";
import "./chunk-GBT3GB5Y.js";
import {
  require_jsx_runtime
} from "./chunk-ZYX7IIE4.js";
import {
  require_react
} from "./chunk-HS5T2ZWL.js";
import "./chunk-QPQMJR4K.js";
import "./chunk-3WUHF2EA.js";
import {
  __toESM
} from "./chunk-AUZ3RYOM.js";

// node_modules/@aptos-labs/wallet-adapter-ant-design/dist/index.mjs
var import_react = __toESM(require_react(), 1);
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var truncateAddress = (address) => {
  if (!address)
    return;
  return `${address.slice(0, 6)}...${address.slice(-5)}`;
};
var { Text } = typography_default;
function WalletSelector({
  isModalOpen,
  setModalOpen
}) {
  const [walletSelectorModalOpen, setWalletSelectorModalOpen] = (0, import_react.useState)(false);
  (0, import_react.useEffect)(() => {
    if (isModalOpen !== void 0) {
      setWalletSelectorModalOpen(isModalOpen);
    }
  }, [isModalOpen]);
  const { connect, disconnect, account, wallets, connected } = useWallet();
  const onWalletButtonClick = () => {
    if (connected) {
      disconnect();
    } else {
      setWalletSelectorModalOpen(true);
    }
  };
  const onWalletSelected = (wallet) => {
    connect(wallet);
    setWalletSelectorModalOpen(false);
    if (setModalOpen) {
      setModalOpen(false);
    }
  };
  const onCancel = () => {
    setWalletSelectorModalOpen(false);
    if (setModalOpen) {
      setModalOpen(false);
    }
  };
  const buttonText = (account == null ? void 0 : account.ansName) ? account == null ? void 0 : account.ansName : truncateAddress(account == null ? void 0 : account.address);
  return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, {
    children: [
      (0, import_jsx_runtime.jsx)(button_default, {
        className: "wallet-button",
        onClick: () => onWalletButtonClick(),
        children: connected ? buttonText : "Connect Wallet"
      }),
      (0, import_jsx_runtime.jsx)(modal_default, {
        title: (0, import_jsx_runtime.jsx)("div", {
          className: "wallet-modal-title",
          children: "Connect Wallet"
        }),
        centered: true,
        open: walletSelectorModalOpen,
        onCancel,
        footer: [],
        closable: false,
        zIndex: 9999,
        children: !connected && (0, import_jsx_runtime.jsx)(menu_default, {
          children: wallets.map((wallet) => {
            return walletView(wallet, onWalletSelected);
          })
        })
      })
    ]
  });
}
var walletView = (wallet, onWalletSelected) => {
  const isWalletReady = wallet.readyState === WalletReadyState.Installed || wallet.readyState === WalletReadyState.Loadable;
  const mobileSupport = wallet.deeplinkProvider;
  if (!isWalletReady && isRedirectable()) {
    if (mobileSupport) {
      return (0, import_jsx_runtime.jsx)(menu_default.Item, {
        onClick: () => onWalletSelected(wallet.name),
        children: (0, import_jsx_runtime.jsxs)("div", {
          className: "wallet-menu-wrapper",
          children: [
            (0, import_jsx_runtime.jsxs)("div", {
              className: "wallet-name-wrapper",
              children: [
                (0, import_jsx_runtime.jsx)("img", {
                  src: wallet.icon,
                  width: 25,
                  style: { marginRight: 10 }
                }),
                (0, import_jsx_runtime.jsx)(Text, {
                  className: "wallet-selector-text",
                  children: wallet.name
                })
              ]
            }),
            (0, import_jsx_runtime.jsx)(button_default, {
              className: "wallet-connect-button",
              children: (0, import_jsx_runtime.jsx)(Text, {
                className: "wallet-connect-button-text",
                children: "Connect"
              })
            })
          ]
        })
      }, wallet.name);
    } else {
      return (0, import_jsx_runtime.jsx)(menu_default.Item, {
        disabled: true,
        children: (0, import_jsx_runtime.jsx)("div", {
          className: "wallet-menu-wrapper",
          children: (0, import_jsx_runtime.jsxs)("div", {
            className: "wallet-name-wrapper",
            children: [
              (0, import_jsx_runtime.jsx)("img", {
                src: wallet.icon,
                width: 25,
                style: { marginRight: 10 }
              }),
              (0, import_jsx_runtime.jsx)(Text, {
                className: "wallet-selector-text",
                children: wallet.name
              })
            ]
          })
        })
      }, wallet.name);
    }
  } else {
    return (0, import_jsx_runtime.jsx)(menu_default.Item, {
      onClick: wallet.readyState === WalletReadyState.Installed || wallet.readyState === WalletReadyState.Loadable ? () => onWalletSelected(wallet.name) : () => window.open(wallet.url),
      children: (0, import_jsx_runtime.jsxs)("div", {
        className: "wallet-menu-wrapper",
        children: [
          (0, import_jsx_runtime.jsxs)("div", {
            className: "wallet-name-wrapper",
            children: [
              (0, import_jsx_runtime.jsx)("img", {
                src: wallet.icon,
                width: 25,
                style: { marginRight: 10 }
              }),
              (0, import_jsx_runtime.jsx)(Text, {
                className: "wallet-selector-text",
                children: wallet.name
              })
            ]
          }),
          wallet.readyState === WalletReadyState.Installed || wallet.readyState === WalletReadyState.Loadable ? (0, import_jsx_runtime.jsx)(button_default, {
            className: "wallet-connect-button",
            children: (0, import_jsx_runtime.jsx)(Text, {
              className: "wallet-connect-button-text",
              children: "Connect"
            })
          }) : (0, import_jsx_runtime.jsx)(Text, {
            className: "wallet-connect-install",
            children: "Install"
          })
        ]
      })
    }, wallet.name);
  }
};
export {
  WalletSelector
};
//# sourceMappingURL=@aptos-labs_wallet-adapter-ant-design.js.map
